(()=>{"use strict";var e={6159:(e,t,n)=>{var r=n(831),a=n.n(r),o=n(9526),l=n(3961),i=n(5321),c=n(8315),u=n(4508),s=n(7122),f=n(8562),m=n(1259),d=n(5505),p=(0,f.iv)({width:120,marginLeft:5}),b=(0,f.iv)({width:120,marginLeft:5}),h=(0,f.iv)({marginTop:0,marginBottom:0,marginLeft:0,marginRight:4}),v=(0,f.iv)({marginTop:0,marginBottom:0,marginLeft:0,marginRight:0}),g=(0,f.iv)({marginLeft:8,marginRight:4,marginTop:"auto",marginBottom:"auto"}),y=(0,f.iv)({display:"flex",alignContent:"flex-start"});const x=function(e){var t=e.initialPrefs,n=e.onClose,r=e.onApply,l=e.onSubmit;a().debug("PreferencesModal: initialPrefs: ",t.toJS());var x=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)l.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return l}((0,o.useState)(t),2),E=x[0],w=x[1],k=function(e){e.keyCode===c.Q4?(e.preventDefault(),n()):e.keyCode===c.tt&&N(e)},N=function(e){e.preventDefault(),l(E)},S=E.popoutOnStart,C=E.dedupeTabs,O=E.revertOnOpen,T=E.theme,P=Object.keys(s.n).map((function(e){return o.createElement("option",{key:e,value:e},e)})),j=o.createElement("select",{className:p,name:"theme",value:T,onChange:function(e){return function(e){var t=E.set("theme",e.target.value);a().debug("handleThemeChange: nextPrefs:",t.toJS()),w(t)}(e)}},P),D=E.layout,L=Object.keys(m.$).map((function(e){return o.createElement("option",{key:e,value:e},e)})),A=o.createElement("select",{className:p,name:"layout",value:D,onChange:function(e){return function(e){var t=E.set("layout",e.target.value);a().debug("handleThemeChange: nextPrefs:",t.toJS()),w(t)}(e)}},L),B=(0,d.CJ)(E.fontScaleFactor),F=d.OG.map((function(e){return o.createElement("option",{key:e.toString(),value:e},e.toString())})),I=o.createElement("select",{className:b,name:"fontSize",value:B,onChange:function(e){return function(e){var t=E,n=(0,d.pv)(Number.parseInt(e.target.value)),r=t.set("fontScaleFactor",n);a().debug("handleFontSizeChange: fontSize: ",e.target.value,", nextPrefs:",r.toJS()),w(r)}(e)}},F),J=i.db;return o.createElement(u.Vq,{className:i.HP,title:"Tabli Preferences",onClose:n},o.createElement(u.uT,null,o.createElement("div",{className:i.fH},o.createElement("form",{className:i.GS,onSubmit:N},o.createElement("div",{className:i.r4},o.createElement("div",{className:(0,f.cx)("checkbox",J,y)},o.createElement("input",{type:"checkbox",className:g,checked:S,onChange:function(e){return n=(t=E).set("popoutOnStart",!t.popoutOnStart),void w(n);var t,n}}),o.createElement("label",{className:v},"Show Tabli popout window at startup")),o.createElement("div",{className:(0,f.cx)("checkbox",J,y)},o.createElement("input",{type:"checkbox",className:g,checked:C,onChange:function(e){return n=(t=E).set("dedupeTabs",!t.dedupeTabs),void w(n);var t,n}}),o.createElement("label",{className:v},"Automatically close duplicate tabs")),o.createElement("div",{className:(0,f.cx)("checkbox",J,y)},o.createElement("input",{type:"checkbox",className:g,checked:O,onChange:function(e){return n=(t=E).set("revertOnOpen",!t.revertOnOpen),void w(n);var t,n}}),o.createElement("label",{className:v},"Only re-open saved tabs when re-opening saved windows")),o.createElement("div",null),o.createElement("div",null),o.createElement("div",{className:i.Dt},o.createElement("label",{className:h},"Theme")),j,o.createElement("div",{className:i.Dt},o.createElement("label",{className:h},"Layout")),A,o.createElement("div",{className:i.Dt},o.createElement("label",{className:h},"Font Size")),I)),o.createElement("hr",null),o.createElement("div",{className:i.pi},o.createElement("button",{type:"button",className:"btn btn-default btn-light tabli-dialog-button",onClick:function(e){!function(e){e.preventDefault(),r(t)}(e),n()},tabIndex:0},"Cancel"),o.createElement("button",{type:"button",className:"btn btn-info tabli-dialog-button",onClick:function(e){return function(e){e.preventDefault(),r(E)}(e)},tabIndex:0,onKeyDown:k},"Apply"),o.createElement("button",{type:"button",className:"btn btn-primary btn-default tabli-dialog-button",onClick:function(e){return N(e)},tabIndex:0,onKeyDown:k},"OK")))))};var E=n(1486),w=n(7619),k=n.n(w),N=n(1909),S=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},O=k(),T=function(){return S(void 0,void 0,void 0,(function(){var e;return C(this,(function(t){switch(t.label){case 0:return a().debug("onClose"),[4,O.tabs.getCurrent()];case 1:return e=t.sent(),a().debug("onClose tab: ",e),e.id&&chrome.tabs.remove([e.id]),[2]}}))}))},P=function(e,t){return S(void 0,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return[4,E.$A(t,e)];case 1:return n.sent(),[2]}}))}))};window.onload=function(){return S(void 0,void 0,void 0,(function(){var e,t,n,r,i;return C(this,(function(c){try{e=chrome.extension.getBackgroundPage(),t=e.stateRef,n=(0,N.mutableGet)(t),r=document.getElementById("prefsContent"),i=o.createElement(x,{onClose:T,initialPrefs:n.preferences,onApply:function(e){return P(t,e)},onSubmit:function(e){return n=t,r=e,S(void 0,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,P(n,r)];case 1:return e.sent(),[4,T()];case 2:return e.sent(),[2]}}))}));var n,r}}),l.render(i,r)}catch(e){throw a().error("caught exception rendering preferences page:"),a().error(e.stack),e}return[2]}))}))}}},t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.x=e=>{},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.j=3,(()=>{var e={3:0},t=[[6159,0]],r=e=>{},a=(a,o)=>{for(var l,i,[c,u,s,f]=o,m=0,d=[];m<c.length;m++)i=c[m],n.o(e,i)&&e[i]&&d.push(e[i][0]),e[i]=0;for(l in u)n.o(u,l)&&(n.m[l]=u[l]);for(s&&s(n),a&&a(o);d.length;)d.shift()();return f&&t.push.apply(t,f),r()},o=self.webpackChunktabli=self.webpackChunktabli||[];function l(){for(var r,a=0;a<t.length;a++){for(var o=t[a],l=!0,i=1;i<o.length;i++){var c=o[i];0!==e[c]&&(l=!1)}l&&(t.splice(a--,1),r=n(n.s=o[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),r}o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o));var i=n.x;n.x=()=>(n.x=i||(e=>{}),(r=l)())})(),n.x()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YWJsaS8uL3NyYy90cy9jb21wb25lbnRzL1ByZWZlcmVuY2VzTW9kYWwudHN4Iiwid2VicGFjazovL3RhYmxpLy4vc3JjL3RzL3ByZWZzUGFnZS50c3giLCJ3ZWJwYWNrOi8vdGFibGkvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdGFibGkvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdGFibGkvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RhYmxpL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdGFibGkvd2VicGFjay9ydW50aW1lL2hhcm1vbnkgbW9kdWxlIGRlY29yYXRvciIsIndlYnBhY2s6Ly90YWJsaS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RhYmxpL3dlYnBhY2svcnVudGltZS9ub2RlIG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8vdGFibGkvd2VicGFjay9ydW50aW1lL3J1bnRpbWVJZCIsIndlYnBhY2s6Ly90YWJsaS93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly90YWJsaS93ZWJwYWNrL3N0YXJ0dXAiXSwibmFtZXMiOlsidGhlbWVTZWxlY3RTdHlsZSIsIndpZHRoIiwibWFyZ2luTGVmdCIsImZvbnRTaXplU2VsZWN0U3R5bGUiLCJzZWxlY3RMYWJlbFN0eWxlIiwibWFyZ2luVG9wIiwibWFyZ2luQm90dG9tIiwibWFyZ2luUmlnaHQiLCJjaGVja0xhYmVsU3R5bGUiLCJwcmVmc0NoZWNrYm94IiwicHJlZnNMYWJlbGVkQ2hlY2tib3giLCJkaXNwbGF5IiwiYWxpZ25Db250ZW50IiwiaW5pdGlhbFByZWZzIiwib25DbG9zZSIsIm9uQXBwbHkiLCJvblN1Ym1pdCIsInRvSlMiLCJ1c2VTdGF0ZSIsInByZWZzIiwic2V0UHJlZnMiLCJoYW5kbGVLZXlEb3duIiwiZSIsImtleUNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsImhhbmRsZVN1Ym1pdCIsInBvcFN0YXJ0IiwicG9wb3V0T25TdGFydCIsImRlZHVwZVRhYnMiLCJyZXZlcnRPbk9wZW4iLCJjdXJyZW50VGhlbWUiLCJ0aGVtZSIsInRoZW1lT3B0cyIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJubSIsImtleSIsInZhbHVlIiwidGhlbWVTZWxlY3QiLCJjbGFzc05hbWUiLCJuYW1lIiwib25DaGFuZ2UiLCJuZXh0UHJlZnMiLCJzZXQiLCJ0YXJnZXQiLCJoYW5kbGVUaGVtZUNoYW5nZSIsImN1cnJlbnRMYXlvdXQiLCJsYXlvdXQiLCJsYXlvdXRPcHRzIiwibGF5b3V0U2VsZWN0IiwiaGFuZGxlTGF5b3V0Q2hhbmdlIiwiY3VycmVudEZvbnRTaXplIiwiZm9udFNjYWxlRmFjdG9yIiwiZm9udFNpemVPcHRzIiwic3oiLCJ0b1N0cmluZyIsImZvbnRTaXplU2VsZWN0Iiwib2xkUHJlZnMiLCJuZXh0U2NhbGVGYWN0b3IiLCJOdW1iZXIiLCJwYXJzZUludCIsImhhbmRsZUZvbnRTaXplQ2hhbmdlIiwicmlnaHRDb2wiLCJNb2RhbCIsInRpdGxlIiwiY3giLCJ0eXBlIiwiY2hlY2tlZCIsIm9uQ2xpY2siLCJoYW5kbGVDYW5jZWwiLCJ0YWJJbmRleCIsImhhbmRsZUFwcGx5Iiwib25LZXlEb3duIiwiY2hyb21lcCIsInRhYnMiLCJnZXRDdXJyZW50IiwidGFiIiwiaWQiLCJjaHJvbWUiLCJyZW1vdmUiLCJvbkFwcGx5UHJlZmVyZW5jZXMiLCJzdGF0ZVJlZiIsIm5ld1ByZWZzIiwiYWN0aW9ucyIsIndpbmRvdyIsIm9ubG9hZCIsImJnUGFnZSIsImV4dGVuc2lvbiIsImdldEJhY2tncm91bmRQYWdlIiwic3QiLCJtdXRhYmxlR2V0IiwicGFyZW50Tm9kZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJtb2RhbCIsInByZWZlcmVuY2VzIiwic3RhY2siLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwibG9hZGVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJtIiwieCIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiaG1kIiwiY3JlYXRlIiwiY2hpbGRyZW4iLCJFcnJvciIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsIm5tZCIsInBhdGhzIiwiaiIsImluc3RhbGxlZENodW5rcyIsIjMiLCJkZWZlcnJlZE1vZHVsZXMiLCJjaGVja0RlZmVycmVkTW9kdWxlcyIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJkYXRhIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwiZXhlY3V0ZU1vZHVsZXMiLCJpIiwicmVzb2x2ZXMiLCJsZW5ndGgiLCJwdXNoIiwic2hpZnQiLCJhcHBseSIsImNodW5rTG9hZGluZ0dsb2JhbCIsInNlbGYiLCJjaGVja0RlZmVycmVkTW9kdWxlc0ltcGwiLCJyZXN1bHQiLCJkZWZlcnJlZE1vZHVsZSIsImZ1bGZpbGxlZCIsImRlcElkIiwic3BsaWNlIiwicyIsImZvckVhY2giLCJiaW5kIiwic3RhcnR1cCJdLCJtYXBwaW5ncyI6InlKQWtCTUEsR0FBbUIsUUFBSSxDQUN6QkMsTUFIaUIsSUFJakJDLFdBQVksSUFHVkMsR0FBc0IsUUFBSSxDQUM1QkYsTUFSaUIsSUFTakJDLFdBQVksSUFHVkUsR0FBbUIsUUFBSSxDQUN6QkMsVUFBVyxFQUNYQyxhQUFjLEVBQ2RKLFdBQVksRUFDWkssWUFBYSxJQUdYQyxHQUFrQixRQUFJLENB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QU9iLElBQUssR0FDNUJTLEVBQVN2RCxFQUFvQkEsRUFBb0I0RCxFQUFJSixFQUFlLEtBT3RFLE9BSjhCLElBQTNCcEIsRUFBZ0JZLFNBQ2xCaEQsRUFBb0JRLElBQ3BCUixFQUFvQlEsRUFBSUEsT0FFbEIrQyxFQXJCUkgsRUFBbUJTLFFBQVF2QixFQUFxQndCLEtBQUssS0FBTSxJQUMzRFYsRUFBbUJILEtBQU9YLEVBQXFCd0IsS0FBSyxLQUFNVixFQUFtQkgsS0FBS2EsS0FBS1YsSUFzQnZGLElBQUlXLEVBQVUvRCxFQUFvQlEsRUFDbENSLEVBQW9CUSxFQUFJLEtBRXZCUixFQUFvQlEsRUFBSXVELEdBQVcsQ0FBQ3ZELFFBQzVCNkIsRUFBdUJpQixPLEdDbEZ6QnRELEVBQW9CUSxLIiwiZmlsZSI6InByZWZzUGFnZS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nIGZyb20gJ2xvZ2xldmVsJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgc3R5bGVzIGZyb20gJy4vY3NzU3R5bGVzJztcbmltcG9ydCAqIGFzIENvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgKiBhcyBNb2RhbCBmcm9tICcuL01vZGFsJztcbmltcG9ydCB7IHRoZW1lcyB9IGZyb20gJy4vdGhlbWVDb250ZXh0JztcbmltcG9ydCB7IGNzcywgY3ggfSBmcm9tICdAZW1vdGlvbi9jc3MnO1xuaW1wb3J0IHsgUHJlZmVyZW5jZXMgfSBmcm9tICcuLi9wcmVmZXJlbmNlcyc7XG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGxheW91dHMgfSBmcm9tICcuL0xheW91dENvbnRleHQnO1xuaW1wb3J0IHtcbiAgICBmb250U2NhbGVGYWN0b3JUb1NpemUsXG4gICAgZm9udFNpemVUb1NjYWxlRmFjdG9yLFxuICAgIGZvbnRTaXplVmFscyxcbn0gZnJvbSAnLi4vcmVuZGVyVXRpbHMnO1xuXG5jb25zdCBTRUxFQ1RfV0lEVEggPSAxMjA7XG5cbmNvbnN0IHRoZW1lU2VsZWN0U3R5bGUgPSBjc3Moe1xuICAgIHdpZHRoOiBTRUxFQ1RfV0lEVEgsXG4gICAgbWFyZ2luTGVmdDogNSxcbn0pO1xuXG5jb25zdCBmb250U2l6ZVNlbGVjdFN0eWxlID0gY3NzKHtcbiAgICB3aWR0aDogU0VMRUNUX1dJRFRILFxuICAgIG1hcmdpbkxlZnQ6IDUsXG59KTtcblxuY29uc3Qgc2VsZWN0TGFiZWxTdHlsZSA9IGNzcyh7XG4gICAgbWFyZ2luVG9wOiAwLFxuICAgIG1hcmdpbkJvdHRvbTogMCxcbiAgICBtYXJnaW5MZWZ0OiAwLFxuICAgIG1hcmdpblJpZ2h0OiA0LFxufSk7XG5cbmNvbnN0IGNoZWNrTGFiZWxTdHlsZSA9IGNzcyh7XG4gICAgbWFyZ2luVG9wOiAwLFxuICAgIG1hcmdpbkJvdHRvbTogMCxcbiAgICBtYXJnaW5MZWZ0OiAwLFxuICAgIG1hcmdpblJpZ2h0OiAwLFxufSk7XG5cbmNvbnN0IHByZWZzQ2hlY2tib3ggPSBjc3Moe1xuICAgIG1hcmdpbkxlZnQ6IDgsXG4gICAgbWFyZ2luUmlnaHQ6IDQsXG4gICAgbWFyZ2luVG9wOiAnYXV0bycsXG4gICAgbWFyZ2luQm90dG9tOiAnYXV0bycsXG59KTtcblxuY29uc3QgcHJlZnNMYWJlbGVkQ2hlY2tib3ggPSBjc3Moe1xuICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICBhbGlnbkNvbnRlbnQ6ICdmbGV4LXN0YXJ0Jyxcbn0pO1xuXG5pbnRlcmZhY2UgUHJlZmVyZW5jZXNNb2RhbFByb3BzIHtcbiAgICBpbml0aWFsUHJlZnM6IFByZWZlcmVuY2VzO1xuICAgIG9uQ2xvc2U6ICgpID0+IHZvaWQ7XG4gICAgb25BcHBseTogKG5ld1ByZWZzOiBQcmVmZXJlbmNlcykgPT4gdm9pZDtcbiAgICBvblN1Ym1pdDogKG5ld1ByZWZzOiBQcmVmZXJlbmNlcykgPT4gdm9pZDtcbn1cblxuY29uc3QgUHJlZmVyZW5jZXNNb2RhbDogUmVhY3QuRkM8UHJlZmVyZW5jZXNNb2RhbFByb3BzPiA9ICh7XG4gICAgaW5pdGlhbFByZWZzLFxuICAgIG9uQ2xvc2UsXG4gICAgb25BcHBseSxcbiAgICBvblN1Ym1pdCxcbn0pID0+IHtcbiAgICBsb2cuZGVidWcoJ1ByZWZlcmVuY2VzTW9kYWw6IGluaXRpYWxQcmVmczogJywgaW5pdGlhbFByZWZzLnRvSlMoKSk7XG4gICAgY29uc3QgW3ByZWZzLCBzZXRQcmVmc10gPSB1c2VTdGF0ZShpbml0aWFsUHJlZnMpO1xuXG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlOiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxCdXR0b25FbGVtZW50PikgPT4ge1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSBDb25zdGFudHMuS0VZX0VTQykge1xuICAgICAgICAgICAgLy8gRVNDIGtleVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgb25DbG9zZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gQ29uc3RhbnRzLktFWV9FTlRFUikge1xuICAgICAgICAgICAgaGFuZGxlU3VibWl0KGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUNhbmNlbCA9IChlOiBSZWFjdC5TeW50aGV0aWNFdmVudCkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vIHB1dCBiYWNrIGluaXRpYWwgcHJlZnM6XG4gICAgICAgIG9uQXBwbHkoaW5pdGlhbFByZWZzKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlQXBwbHkgPSAoZTogUmVhY3QuU3ludGhldGljRXZlbnQpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBvbkFwcGx5KHByZWZzKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlU3VibWl0ID0gKGU6IFJlYWN0LlN5bnRoZXRpY0V2ZW50KSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgb25TdWJtaXQocHJlZnMpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVQb3BTdGFydENoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgICBjb25zdCBvbGRQcmVmcyA9IHByZWZzO1xuICAgICAgICBjb25zdCBuZXh0UHJlZnMgPSBvbGRQcmVmcy5zZXQoXG4gICAgICAgICAgICAncG9wb3V0T25TdGFydCcsXG4gICAgICAgICAgICAhb2xkUHJlZnMucG9wb3V0T25TdGFydFxuICAgICAgICApO1xuICAgICAgICBzZXRQcmVmcyhuZXh0UHJlZnMpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVUYWJEZWR1cGVDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9sZFByZWZzID0gcHJlZnM7XG4gICAgICAgIGNvbnN0IG5leHRQcmVmcyA9IG9sZFByZWZzLnNldCgnZGVkdXBlVGFicycsICFvbGRQcmVmcy5kZWR1cGVUYWJzKTtcbiAgICAgICAgc2V0UHJlZnMobmV4dFByZWZzKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlUmV2ZXJ0T25PcGVuQ2hhbmdlID0gKFxuICAgICAgICBlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICkgPT4ge1xuICAgICAgICBjb25zdCBvbGRQcmVmcyA9IHByZWZzO1xuICAgICAgICBjb25zdCBuZXh0UHJlZnMgPSBvbGRQcmVmcy5zZXQoJ3JldmVydE9uT3BlbicsICFvbGRQcmVmcy5yZXZlcnRPbk9wZW4pO1xuICAgICAgICBzZXRQcmVmcyhuZXh0UHJlZnMpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVUaGVtZUNoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pID0+IHtcbiAgICAgICAgY29uc3Qgb2xkUHJlZnMgPSBwcmVmcztcbiAgICAgICAgY29uc3QgbmV4dFByZWZzID0gb2xkUHJlZnMuc2V0KCd0aGVtZScsIGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgbG9nLmRlYnVnKCdoYW5kbGVUaGVtZUNoYW5nZTogbmV4dFByZWZzOicsIG5leHRQcmVmcy50b0pTKCkpO1xuICAgICAgICBzZXRQcmVmcyhuZXh0UHJlZnMpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVMYXlvdXRDaGFuZ2UgPSAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgICAgIGNvbnN0IG9sZFByZWZzID0gcHJlZnM7XG4gICAgICAgIGNvbnN0IG5leHRQcmVmcyA9IG9sZFByZWZzLnNldCgnbGF5b3V0JywgZS50YXJnZXQudmFsdWUpO1xuICAgICAgICBsb2cuZGVidWcoJ2hhbmRsZVRoZW1lQ2hhbmdlOiBuZXh0UHJlZnM6JywgbmV4dFByZWZzLnRvSlMoKSk7XG4gICAgICAgIHNldFByZWZzKG5leHRQcmVmcyk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUZvbnRTaXplQ2hhbmdlID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xuICAgICAgICBjb25zdCBvbGRQcmVmcyA9IHByZWZzO1xuICAgICAgICBjb25zdCBuZXh0U2NhbGVGYWN0b3IgPSBmb250U2l6ZVRvU2NhbGVGYWN0b3IoXG4gICAgICAgICAgICBOdW1iZXIucGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IG5leHRQcmVmcyA9IG9sZFByZWZzLnNldCgnZm9udFNjYWxlRmFjdG9yJywgbmV4dFNjYWxlRmFjdG9yKTtcbiAgICAgICAgbG9nLmRlYnVnKFxuICAgICAgICAgICAgJ2hhbmRsZUZvbnRTaXplQ2hhbmdlOiBmb250U2l6ZTogJyxcbiAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgJywgbmV4dFByZWZzOicsXG4gICAgICAgICAgICBuZXh0UHJlZnMudG9KUygpXG4gICAgICAgICk7XG4gICAgICAgIHNldFByZWZzKG5leHRQcmVmcyk7XG4gICAgfTtcblxuICAgIGNvbnN0IHBvcFN0YXJ0ID0gcHJlZnMucG9wb3V0T25TdGFydDtcbiAgICBjb25zdCBkZWR1cGVUYWJzID0gcHJlZnMuZGVkdXBlVGFicztcbiAgICBjb25zdCByZXZlcnRPbk9wZW4gPSBwcmVmcy5yZXZlcnRPbk9wZW47XG5cbiAgICBjb25zdCBjdXJyZW50VGhlbWUgPSBwcmVmcy50aGVtZTtcbiAgICBjb25zdCB0aGVtZU5hbWVzID0gT2JqZWN0LmtleXModGhlbWVzKTtcbiAgICBjb25zdCB0aGVtZU9wdHMgPSB0aGVtZU5hbWVzLm1hcCgobm0pID0+IChcbiAgICAgICAgPG9wdGlvbiBrZXk9e25tfSB2YWx1ZT17bm19PlxuICAgICAgICAgICAge25tfVxuICAgICAgICA8L29wdGlvbj5cbiAgICApKTtcbiAgICBjb25zdCB0aGVtZVNlbGVjdCA9IChcbiAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGVtZVNlbGVjdFN0eWxlfVxuICAgICAgICAgICAgbmFtZT1cInRoZW1lXCJcbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50VGhlbWV9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZVRoZW1lQ2hhbmdlKGUpfVxuICAgICAgICA+XG4gICAgICAgICAgICB7dGhlbWVPcHRzfVxuICAgICAgICA8L3NlbGVjdD5cbiAgICApO1xuXG4gICAgY29uc3QgY3VycmVudExheW91dCA9IHByZWZzLmxheW91dDtcbiAgICBjb25zdCBsYXlvdXROYW1lcyA9IE9iamVjdC5rZXlzKGxheW91dHMpO1xuICAgIGNvbnN0IGxheW91dE9wdHMgPSBsYXlvdXROYW1lcy5tYXAoKG5tKSA9PiAoXG4gICAgICAgIDxvcHRpb24ga2V5PXtubX0gdmFsdWU9e25tfT5cbiAgICAgICAgICAgIHtubX1cbiAgICAgICAgPC9vcHRpb24+XG4gICAgKSk7XG4gICAgY29uc3QgbGF5b3V0U2VsZWN0ID0gKFxuICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICBjbGFzc05hbWU9e3RoZW1lU2VsZWN0U3R5bGV9XG4gICAgICAgICAgICBuYW1lPVwibGF5b3V0XCJcbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50TGF5b3V0fVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVMYXlvdXRDaGFuZ2UoZSl9XG4gICAgICAgID5cbiAgICAgICAgICAgIHtsYXlvdXRPcHRzfVxuICAgICAgICA8L3NlbGVjdD5cbiAgICApO1xuXG4gICAgY29uc3QgY3VycmVudEZvbnRTaXplID0gZm9udFNjYWxlRmFjdG9yVG9TaXplKHByZWZzLmZvbnRTY2FsZUZhY3Rvcik7XG4gICAgY29uc3QgZm9udFNpemVPcHRzID0gZm9udFNpemVWYWxzLm1hcCgoc3opID0+IChcbiAgICAgICAgPG9wdGlvbiBrZXk9e3N6LnRvU3RyaW5nKCl9IHZhbHVlPXtzen0+XG4gICAgICAgICAgICB7c3oudG9TdHJpbmcoKX1cbiAgICAgICAgPC9vcHRpb24+XG4gICAgKSk7XG4gICAgY29uc3QgZm9udFNpemVTZWxlY3QgPSAoXG4gICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Zm9udFNpemVTZWxlY3RTdHlsZX1cbiAgICAgICAgICAgIG5hbWU9XCJmb250U2l6ZVwiXG4gICAgICAgICAgICB2YWx1ZT17Y3VycmVudEZvbnRTaXplfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVGb250U2l6ZUNoYW5nZShlKX1cbiAgICAgICAgPlxuICAgICAgICAgICAge2ZvbnRTaXplT3B0c31cbiAgICAgICAgPC9zZWxlY3Q+XG4gICAgKTtcblxuICAgIGNvbnN0IHJpZ2h0Q29sID0gc3R5bGVzLnByZWZzR3JpZFJpZ2h0Q29sO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPE1vZGFsLkRpYWxvZ1xuICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMucHJlZnNEaWFsb2d9XG4gICAgICAgICAgICB0aXRsZT1cIlRhYmxpIFByZWZlcmVuY2VzXCJcbiAgICAgICAgICAgIG9uQ2xvc2U9e29uQ2xvc2V9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxNb2RhbC5Cb2R5PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubW9kYWxCb2R5Q29udGFpbmVyfT5cbiAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPXtzdHlsZXMucHJlZnNGb3JtfSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMucHJlZnNHcmlkQ29udGFpbmVyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2hlY2tib3gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRDb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmc0xhYmVsZWRDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtwcmVmc0NoZWNrYm94fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17cG9wU3RhcnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZVBvcFN0YXJ0Q2hhbmdlKGUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPXtjaGVja0xhYmVsU3R5bGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvdyBUYWJsaSBwb3BvdXQgd2luZG93IGF0IHN0YXJ0dXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2hlY2tib3gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRDb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmc0xhYmVsZWRDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtwcmVmc0NoZWNrYm94fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17ZGVkdXBlVGFic31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlVGFiRGVkdXBlQ2hhbmdlKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9e2NoZWNrTGFiZWxTdHlsZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvbWF0aWNhbGx5IGNsb3NlIGR1cGxpY2F0ZSB0YWJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NoZWNrYm94JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0Q29sLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZnNMYWJlbGVkQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17cHJlZnNDaGVja2JveH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3JldmVydE9uT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVSZXZlcnRPbk9wZW5DaGFuZ2UoZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT17Y2hlY2tMYWJlbFN0eWxlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9ubHkgcmUtb3BlbiBzYXZlZCB0YWJzIHdoZW4gcmUtb3BlbmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWQgd2luZG93c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5wcmVmc0dyaWRMYWJlbH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9e3NlbGVjdExhYmVsU3R5bGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhlbWVTZWxlY3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5wcmVmc0dyaWRMYWJlbH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9e3NlbGVjdExhYmVsU3R5bGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGF5b3V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xheW91dFNlbGVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnByZWZzR3JpZExhYmVsfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT17c2VsZWN0TGFiZWxTdHlsZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb250IFNpemVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9udFNpemVTZWxlY3R9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5kaWFsb2dCdXR0b25Sb3d9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdCBidG4tbGlnaHQgdGFibGktZGlhbG9nLWJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ2FuY2VsKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1pbmZvIHRhYmxpLWRpYWxvZy1idXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiBoYW5kbGVBcHBseShlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e2hhbmRsZUtleURvd259XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQXBwbHlcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeSBidG4tZGVmYXVsdCB0YWJsaS1kaWFsb2ctYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gaGFuZGxlU3VibWl0KGUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXswfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPS1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9Nb2RhbC5Cb2R5PlxuICAgICAgICA8L01vZGFsLkRpYWxvZz5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUHJlZmVyZW5jZXNNb2RhbDtcbiIsImltcG9ydCBsb2cgZnJvbSAnbG9nbGV2ZWwnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBQcmVmZXJlbmNlc01vZGFsIGZyb20gJy4vY29tcG9uZW50cy9QcmVmZXJlbmNlc01vZGFsJztcblxuaW1wb3J0ICogYXMgYWN0aW9ucyBmcm9tICcuL2FjdGlvbnMnO1xuXG5pbXBvcnQgQ2hyb21lUHJvbWlzZSBmcm9tICdjaHJvbWUtcHJvbWlzZSc7XG5pbXBvcnQgeyBTdGF0ZVJlZiwgbXV0YWJsZUdldCB9IGZyb20gJ29uZXJlZic7XG5pbXBvcnQgVGFiTWFuYWdlclN0YXRlIGZyb20gJy4vdGFiTWFuYWdlclN0YXRlJztcbmltcG9ydCB7IFByZWZlcmVuY2VzIH0gZnJvbSAnLi9wcmVmZXJlbmNlcyc7XG5jb25zdCBjaHJvbWVwID0gQ2hyb21lUHJvbWlzZTtcblxuY29uc3Qgb25DbG9zZSA9IGFzeW5jICgpID0+IHtcbiAgICBsb2cuZGVidWcoJ29uQ2xvc2UnKTtcbiAgICBjb25zdCB0YWIgPSBhd2FpdCBjaHJvbWVwLnRhYnMuZ2V0Q3VycmVudCgpO1xuICAgIGxvZy5kZWJ1Zygnb25DbG9zZSB0YWI6ICcsIHRhYik7XG4gICAgaWYgKHRhYi5pZCkge1xuICAgICAgICBjaHJvbWUudGFicy5yZW1vdmUoW3RhYi5pZF0pO1xuICAgIH1cbn07XG5cbmNvbnN0IG9uQXBwbHlQcmVmZXJlbmNlcyA9IGFzeW5jIChcbiAgICBzdGF0ZVJlZjogU3RhdGVSZWY8VGFiTWFuYWdlclN0YXRlPixcbiAgICBuZXdQcmVmczogUHJlZmVyZW5jZXNcbikgPT4ge1xuICAgIGF3YWl0IGFjdGlvbnMuc2F2ZVByZWZlcmVuY2VzKG5ld1ByZWZzLCBzdGF0ZVJlZik7XG59O1xuXG5jb25zdCBvblVwZGF0ZVByZWZlcmVuY2VzID0gYXN5bmMgKFxuICAgIHN0YXRlUmVmOiBTdGF0ZVJlZjxUYWJNYW5hZ2VyU3RhdGU+LFxuICAgIG5ld1ByZWZzOiBQcmVmZXJlbmNlc1xuKSA9PiB7XG4gICAgYXdhaXQgb25BcHBseVByZWZlcmVuY2VzKHN0YXRlUmVmLCBuZXdQcmVmcyk7XG4gICAgYXdhaXQgb25DbG9zZSgpO1xufTtcblxuY29uc3QgcmVuZGVyUHJlZnMgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYmdQYWdlID0gY2hyb21lLmV4dGVuc2lvbi5nZXRCYWNrZ3JvdW5kUGFnZSgpO1xuICAgICAgICBjb25zdCBzdGF0ZVJlZiA9IChiZ1BhZ2UgYXMgYW55KS5zdGF0ZVJlZiBhcyBTdGF0ZVJlZjxUYWJNYW5hZ2VyU3RhdGU+O1xuICAgICAgICBjb25zdCBzdCA9IG11dGFibGVHZXQoc3RhdGVSZWYpO1xuICAgICAgICBjb25zdCBwYXJlbnROb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZWZzQ29udGVudCcpO1xuICAgICAgICBjb25zdCBtb2RhbCA9IChcbiAgICAgICAgICAgIDxQcmVmZXJlbmNlc01vZGFsXG4gICAgICAgICAgICAgICAgb25DbG9zZT17b25DbG9zZX1cbiAgICAgICAgICAgICAgICBpbml0aWFsUHJlZnM9e3N0LnByZWZlcmVuY2VzfVxuICAgICAgICAgICAgICAgIG9uQXBwbHk9e3ByZWZzID0+IG9uQXBwbHlQcmVmZXJlbmNlcyhzdGF0ZVJlZiwgcHJlZnMpfVxuICAgICAgICAgICAgICAgIG9uU3VibWl0PXtwcmVmcyA9PiBvblVwZGF0ZVByZWZlcmVuY2VzKHN0YXRlUmVmLCBwcmVmcyl9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBSZWFjdERPTS5yZW5kZXIobW9kYWwsIHBhcmVudE5vZGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nLmVycm9yKCdjYXVnaHQgZXhjZXB0aW9uIHJlbmRlcmluZyBwcmVmZXJlbmNlcyBwYWdlOicpO1xuICAgICAgICBsb2cuZXJyb3IoZS5zdGFjayk7XG4gICAgICAgIHRocm93IGU7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gbWFpbigpIHtcbiAgICB3aW5kb3cub25sb2FkID0gKCkgPT4gcmVuZGVyUHJlZnMoKTtcbn1cblxubWFpbigpO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdGxvYWRlZDogZmFsc2UsXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4vLyB0aGUgc3RhcnR1cCBmdW5jdGlvblxuLy8gSXQncyBlbXB0eSBhcyBzb21lIHJ1bnRpbWUgbW9kdWxlIGhhbmRsZXMgdGhlIGRlZmF1bHQgYmVoYXZpb3Jcbl9fd2VicGFja19yZXF1aXJlX18ueCA9IHggPT4ge31cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IG1vZHVsZVsnZGVmYXVsdCddIDpcblx0XHQoKSA9PiBtb2R1bGU7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18uaG1kID0gKG1vZHVsZSkgPT4ge1xuXHRtb2R1bGUgPSBPYmplY3QuY3JlYXRlKG1vZHVsZSk7XG5cdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgJ2V4cG9ydHMnLCB7XG5cdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRzZXQ6ICgpID0+IHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignRVMgTW9kdWxlcyBtYXkgbm90IGFzc2lnbiBtb2R1bGUuZXhwb3J0cyBvciBleHBvcnRzLiosIFVzZSBFU00gZXhwb3J0IHN5bnRheCwgaW5zdGVhZDogJyArIG1vZHVsZS5pZCk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIG1vZHVsZTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5tZCA9IChtb2R1bGUpID0+IHtcblx0bW9kdWxlLnBhdGhzID0gW107XG5cdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0cmV0dXJuIG1vZHVsZTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5qID0gMzsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQzOiAwXG59O1xuXG52YXIgZGVmZXJyZWRNb2R1bGVzID0gW1xuXHRbNjE1OSwwXVxuXTtcbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbnZhciBjaGVja0RlZmVycmVkTW9kdWxlcyA9IHggPT4ge307XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lLCBleGVjdXRlTW9kdWxlc10gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdH1cblx0fVxuXHRpZihydW50aW1lKSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuXHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcblx0fVxuXG5cdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3Rcblx0aWYoZXhlY3V0ZU1vZHVsZXMpIGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMpO1xuXG5cdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt0YWJsaVwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt0YWJsaVwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7XG5cbmZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzSW1wbCgpIHtcblx0dmFyIHJlc3VsdDtcblx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcblx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuXHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG5cdFx0fVxuXHR9XG5cdGlmKGRlZmVycmVkTW9kdWxlcy5sZW5ndGggPT09IDApIHtcblx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLngoKTtcblx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnggPSB4ID0+IHt9O1xuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59XG52YXIgc3RhcnR1cCA9IF9fd2VicGFja19yZXF1aXJlX18ueDtcbl9fd2VicGFja19yZXF1aXJlX18ueCA9ICgpID0+IHtcblx0Ly8gcmVzZXQgc3RhcnR1cCBmdW5jdGlvbiBzbyBpdCBjYW4gYmUgY2FsbGVkIGFnYWluIHdoZW4gbW9yZSBzdGFydHVwIGNvZGUgaXMgYWRkZWRcblx0X193ZWJwYWNrX3JlcXVpcmVfXy54ID0gc3RhcnR1cCB8fCAoeCA9PiB7fSk7XG5cdHJldHVybiAoY2hlY2tEZWZlcnJlZE1vZHVsZXMgPSBjaGVja0RlZmVycmVkTW9kdWxlc0ltcGwpKCk7XG59OyIsIi8vIHJ1biBzdGFydHVwXG5yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy54KCk7XG4iXSwic291cmNlUm9vdCI6IiJ9