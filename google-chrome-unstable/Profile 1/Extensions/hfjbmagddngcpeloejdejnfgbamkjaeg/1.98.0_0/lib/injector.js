"use strict";var VimiumInjector;(function(){var t,n=VimiumInjector,e={id:"",alive:-1,host:"",version:"",cache:null,clickable:void 0,eval:null,reload:null,checkIfEnabled:null,$:null,$h:"",$m:null,$r:null,$g:null,getCommandCount:null,callback:null,destroy:null};if(n)for(t of Object.keys(n))e[t]=n[t];e.alive=-1,e.$g=null,VimiumInjector=e})(),(function(t,n){function e(t,e){var o,l,i,r,a,m,h,p,k,C,$,E,w=VimiumInjector,y=w&&w.clickable,L=w&&w.callback;if(t||(i=e&&e.message,r=s.id||location.host||location.protocol,l=!!(i&&i.lastIndexOf("not exist")>=0&&s.id),false===t?o=": not in the allow list.":!l&&e?o=i?":\n\t".concat(i):": no backend found.":b>3?(o=i?":\n\t".concat(i):": retried but failed (".concat(t,")."),l=false):(setTimeout(c,200*b),b++,l=true),l||(o=o||" (".concat(b," retries)."),console.log("%cVimium C%c: %cfail%c to inject into %c%s%c %s","color:red","color:auto","color:red","color:auto","color:#0c85e9",r,"color:auto",o),L&&w.callback(-1,o))),w&&"function"==typeof w.destroy&&w.destroy(true),a=VimiumInjector={id:g,alive:0,host:u?t?t.host:"":g,version:t?t.version:"",cache:null,clickable:y,eval:null,reload:n(f),checkIfEnabled:null,$:null,$h:t?t.h:"",$m:function(t){VimiumInjector&&VimiumInjector.$r("object"==typeof t?t.t:t)},$r:function(){},$g:null!=v?""===v||"true"===v.toLowerCase():null,getCommandCount:null,callback:L||null,destroy:null},m=document.documentElement,!(t&&m instanceof HTMLHtmlElement))return e;for($ of(p=(h=document.contains(d)?d:(document.head||m).lastChild).nextSibling,k=h.parentElement,C=[],t.s))(E=document.createElement("script")).type="text/javascript",E.async=false,E.src=$,k.insertBefore(E,p),C.push(E);C.length>0&&(C[C.length-1].onload=function(){this.onload=null;for(var t=C.length;0<=--t;)C[t].remove()}),L&&a.callback(0,"loading")}function o(){removeEventListener("DOMContentLoaded",o),!i||h?h(function(){h(function(){setTimeout(c,0)},{timeout:67})},{timeout:330}):setTimeout(c,67)}var l,c,u=!!0,i=!!0,r=u&&"object"==typeof browser&&!("tagName"in browser)?browser:null,a=!!u&&!!(r&&r.runtime&&r.runtime.connect),s=(a?browser:chrome).runtime,d=document.currentScript,f=d.src,m=f.indexOf("://")+3,v=d.dataset.blockFocus,h=i?window.requestIdleCallback:requestIdleCallback,b=1,g=f.slice(m,f.indexOf("/",m));u&&g.indexOf("-")>0&&(g=d.dataset.vimiumId||"vimium-c@gdh1995.cn"),VimiumInjector.id=g=d.dataset.extensionId||g,i&&(h="function"!=typeof h||"tagName"in h?null:h),l=a?function(){s.sendMessage(g,{handler:99,scripts:true}).then(e,function(t){return e(void 0,t)})}:function(){s.sendMessage(g,{handler:99,scripts:true},function(t){var n=s.lastError;return n?e(void 0,n):e(t),n})},c=function(){try{l()}catch(t){console.log("Can not send message to the extension of %o: %s",g,t&&t.message||t+"")}},"loading"!==document.readyState?o():addEventListener("DOMContentLoaded",o,true)})(0,function(t){return function(n){function e(){var e=document.documentElement,o=document.head||document.body||e,l=document.createElement("script");o&&(l.type="text/javascript",l.async=false,l.src=t,console.log("%cVimium C%c begins to reload%s.","color:red","color:auto",1===n?" because it has been updated.":""),o.appendChild(l))}var o,l=VimiumInjector;l&&(o=l.clickable,"function"==typeof l.destroy&&l.destroy(true),l.clickable=o),n?setTimeout(e,200):e()}}),(!document.currentScript||"false"!==(document.currentScript.dataset.vimiumHooks||"").toLowerCase())&&null!==VimiumInjector.clickable&&(function(){var t,n,e,o,l,c,u,i,r;VimiumInjector.clickable=VimiumInjector.clickable||new WeakSet,t=EventTarget,true!==(e=(n=t.prototype).addEventListener).vimiumHooked&&(o=HTMLAnchorElement,l=Element,c=n.addEventListener=function addEventListener(t,n){var c,u,i;return"click"===t&&!(this instanceof o)&&n&&this instanceof l&&(c=VimiumInjector)&&c.clickable&&c.clickable.add(this),2===(i=(u=arguments).length)?e.call(this,t,n):3===i?e.call(this,t,n,u[2]):e.apply(this,u)},i=(u=Function.prototype).toString,r=u.toString=function toString(){return i.apply(this===c?e:this===r?i:this,arguments)},c.vimiumHooked=true,t.vimiumRemoveHooks=function(){delete t.vimiumRemoveHooks,n.addEventListener===c&&(n.addEventListener=e),u.toString===r&&(u.toString=i)},c.prototype=r.prototype=void 0)})();