import { a } from '../../index-9d8fa28c.js';
import { e as he, W as Nt$1, o, p as pe, X as Xn, ao as Dn, a8 as zn, Q as Qn, r, a9 as qt$1 } from '../../json-rpc-bbea77b7.js';
import { b, g, R } from '../../users-73981cf4.js';
import '../../keysIn-f91c894f.js';
import { B as Bn, q as qn } from '../../logging-23079156.js';
import { o as o$1, t as t$1, n } from '../../snippet-collections-86e7c592.js';
import { addToDeconstructorListener as t } from '../destroy.js';
import '../browser.js';
import { Z as Zo, d as Ko, L as Lt$1, m as mt$1, R as Ro, E as ro, t as to, o as on, J as Jo, v as qo, w as wt$1, O as Ot$1, g as ni, n as nn, u as un, S as St$1 } from '../../tracking-ba0776b8.js';
import { X as Xe$1, v as Wp, $ as $p, B as Bp, z as mp, W as Wo, A as dr, E as No, p as jp, F as gr, V as Vr, h as hr, I as ro$1, K as go, P as po, Q as so, R as wo, T as Po, Y as nC, _ as Fo, a0 as ko, b as bo, a1 as Xr, a2 as Tr, a3 as _r, a4 as Br, u as uo, a5 as dp, a6 as $o, a7 as ao, a8 as Vo, a9 as ho, r as yo, aa as gp, ab as fo, S as So, ac as Eo, ad as Ao, ae as Oo, af as no, q as Lo, M as Mo } from '../../content-ui-6b2a6ee6.js';
import { t as t$2 } from '../../src-match-utils-e7679468.js';
import { n as ne, C as Ce } from '../../expander-30141e13.js';
import '../autofill/autofill-forms.js';
import { y as ye, c as ce, p as pC, u as uL } from '../../tag-utils-30396821.js';

const Ne=new he("checklist"),Re=new he("checklist");function Oe(e){const{title:t,optionName:a,completed:n,expandedContent:l,canExpandWhenCompleted:r,expand:s}=e;let i=n?"strike":"";r||(i="strike no-expand");const{data:o,loading:c}=nC((async()=>Re.request("isServerReachable")),[]),u=mt$1("span",{class:"chevron"},mt$1(s?So:Eo,null)),p=mt$1(n||!c&&!o?Ao:Oo,null),d=s&&l&&!(!r&&n);return mt$1("li",null,mt$1("div",{class:d?"expanded":""},mt$1("div",{class:"checklist-item",onClick:()=>{n&&!r||Ne.notification("toggleChecklistItem",{optionName:a,keepOpenIfOpen:!1});}},p,mt$1("p",{class:i},t),(r||!n)&&l&&u),d&&mt$1("div",{class:"checklist-expansion"},l)))}function Fe(e){const{expandedItems:t}=e,a=!0===to((e=>e.global.userInfo)).onboarding?.checklist?.acceptShortcuts,n="acceptShortcuts";return mt$1(Oe,{title:"Accept shortcuts",optionName:n,completed:a,expand:t.includes(n),canExpandWhenCompleted:!1})}function Le(t){const{expandedItems:a$1}=t,n=to((e=>!!e.global.userInfo.onboarding?.checklist?.addVariable)),{magicalMarketingURL:l}=to((e=>e.global.config)),r="addVariable",s=`${l}/autotextexpander/variables`,i=a.browser.runtime.getURL("assets/create-edit-template.gif"),o=mt$1(wt$1,null,mt$1("h3",null,"Show us what information you care about on any structured website"),mt$1("p",null,"Open a website your routinely copy. Add variables from the panel."),mt$1("img",{class:"right-rail-gif",src:i}),mt$1("h3",null,"Need more guidance?"),mt$1("a",{href:s,onClick:e=>ni({type:"checklist.add-variable.learn"}),target:"_blank",rel:"noreferrer",class:"button-medium primary full-width"},"Learn about variables"));return mt$1(Oe,{title:"Add a webpage variable",optionName:r,completed:n,canExpandWhenCompleted:!0,expand:a$1.includes(r),expandedContent:o})}const Be=new he("checklist"),De=new he("checklist"),Ae=new he("checklist");function Me(t,a$1){const n=a$1.find((e=>e.platform===t))?.trigger;if(!t||!n)return null;const l=mt$1("img",{class:"platform-logo",src:a.browser.runtime.getURL(`assets/platform-logos/${t}.png`)});return mt$1("button",{class:"add-variable-shortcut",onClick:()=>async function(e,t){const a=t.find((t=>t.platform===e))?.shortcutId;if(!e||!a)return;Be.notification("setAddVariableShortcutSelected",e),await Ae.request("openOrFocusOptionsTab");const n=await De.request("getSnippetById",a);n&&(await De.request("saveSnippets",[n]),Be.notification("setUserChecklist",{addVariableShortcut:!0}),ni({type:"checklist.add-variable-shortcut.select",platform:e}));}(t,a$1)},l,mt$1("div",{class:"add-variable-shortcut-body"},mt$1("h3",null,n),mt$1("p",null,"Hi ",mt$1("p",{class:"variable"},"First Name"),", Just bringing this back to your attention. Would love to hear your thoughts.")))}function je(e){const{expandedItems:t}=e,{platformToShortcutName:a}=to((e=>e.global.config)),n=to((e=>!!e.global.userInfo.onboarding?.checklist?.addVariableShortcut)),l="addVariableShortcut",r=mt$1(wt$1,null,mt$1("h3",null,"Which web app do you use?"),Me("gmail",a),Me("linkedin",a),mt$1("p",null,"None of the above? Try Twitter"),Me("twitter",a));return mt$1(Oe,{title:"Add variable shortcut",optionName:l,completed:n,canExpandWhenCompleted:!1,expand:t.includes(l),expandedContent:r})}function We(t){const{expandedItems:a$1}=t,{magicalMarketingURL:n}=to((e=>e.global.config)),l=to((e=>!!e.global.userInfo.onboarding?.checklist?.autofillVariable)),r="autofillVariable",s=`${n}/beta/onboarding/sourcing?source=checklist`,i=`${n}/beta/onboarding/data-entry/forms-1?source=checklist`,o=a.browser.runtime.getURL("assets/demo-queues.gif"),c=mt$1(wt$1,null,mt$1("h3",null,"Insert a variable into a spreadsheet, form, or a shortcut"),mt$1("img",{class:"right-rail-gif",src:o}),mt$1("h3",null,"Need a refresher? 1 min tutorials"),mt$1("a",{href:s,onClick:e=>ni({type:"checklist.autofill-variable.try-sheets"}),target:"_blank",rel:"noreferrer",class:"button-medium secondary full-width"},"Try out spreadsheets"),mt$1("a",{href:i,onClick:e=>ni({type:"checklist.autofill-variable.try-forms"}),target:"_blank",rel:"noreferrer",class:"button-medium secondary full-width"},"Try out forms"));return mt$1(Oe,{title:"Autofill a variable",completed:l,optionName:r,canExpandWhenCompleted:!0,expand:a$1.includes(r),expandedContent:c})}const qe=new he("checklist"),He=new he("checklist");function $e(e){const{expandedItems:t}=e,l=to((e=>e.global.userInfo)),[r,s]=nn(!1),i=un(null),o=un(null),c=un(null),u=un(null),p="createAccount",d=()=>{const e=i?.current?.value,t=o?.current?.value;s(!!(c?.current?.value&&u?.current?.value||e&&t));},{data:b,loading:h}=nC((async()=>!(!l.email||!l.jobFunction)||He.request("isServerReachable")),[l.email,l.jobFunction]),m=()=>{if(null!==c.current&&null!==u.current){const e=c?.current?.value,t=u?.current?.value;e&&t&&(qe.request("setUserSignupDetails",{firstName:e,lastName:t}),ni({type:"checklist.create-account.details.name"}));}if(null!==i.current&&null!==o.current){const e=i?.current?.value,t=o?.current?.value;e&&t&&(qe.request("setUserSignupDetails",{jobFunction:e,company:t}),ni({type:"checklist.create-account.details.job"}));}};let f;if(b||h)if(l.email){const e=mt$1(wt$1,null,mt$1("label",{for:"firstName"},"First Name"),mt$1("br",null),mt$1("input",{type:"text",ref:c,placeholder:"Enter your first name",onInput:d}),mt$1("br",null),mt$1("label",{for:"lastName"},"Last Name"),mt$1("br",null),mt$1("input",{type:"text",ref:u,placeholder:"Enter your last name",onInput:d}),mt$1("br",null)),t=mt$1(wt$1,null,mt$1("label",{for:"jobFunction"},"Your function"),mt$1("br",null),mt$1("select",{ref:i,onChange:d},mt$1("option",{value:""},"Choose your function"),mt$1("option",{value:"Administrative"},"Administrative"),mt$1("option",{value:"Customer Success"},"Customer Success"),mt$1("option",{value:"Engineering"},"Engineering"),mt$1("option",{value:"Finance"},"Finance"),mt$1("option",{value:"Entrepreneur"},"Founder/CEO"),mt$1("option",{value:"Healthcare Services"},"Healthcare Services"),mt$1("option",{value:"Human Resources"},"Human Resources (HR)"),mt$1("option",{value:"Recruiter"},"Recruiter"),mt$1("option",{value:"Information Technology"},"Information Technology (IT)"),mt$1("option",{value:"Legal"},"Legal"),mt$1("option",{value:"Marketing"},"Marketing"),mt$1("option",{value:"Operations"},"Operations"),mt$1("option",{value:"Product"},"Product"),mt$1("option",{value:"Purchasing"},"Purchasing"),mt$1("option",{value:"Quality Assurance"},"Quality Assurance (QA)"),mt$1("option",{value:"Real Estate"},"Real Estate"),mt$1("option",{value:"Research"},"Research"),mt$1("option",{value:"Sales"},"Sales"),mt$1("option",{value:"Student"},"Student"),mt$1("option",{value:"Support"},"Support"),mt$1("option",{value:"Other"},"Other (not listed)")),mt$1("br",null),mt$1("label",{for:"company"},"Your company"),mt$1("br",null),mt$1("input",{type:"text",ref:o,placeholder:"Enter your company name",onInput:d}),mt$1("br",null));f=mt$1("div",{class:"user-details"},mt$1("h3",null,"We need your details to better personalize your experience"),!l.firstName&&e,(!l.jobFunction||!l.company)&&t,mt$1("button",{class:"button-medium primary full-width",disabled:!r,onClick:m},"Finish Account"));}else f=mt$1("div",{class:"create-account"},mt$1("h3",null,"Join to get full access"),mt$1("ul",null,mt$1("li",null,mt$1(ko,null)," Save your work"),mt$1("li",null,mt$1(ko,null)," Store shortcuts"),mt$1("li",null,mt$1(ko,null)," Works across your devices"),mt$1("li",null,mt$1(ko,null)," Access to all variables")),mt$1("h3",null,"If you're not signed in"),mt$1("ul",null,mt$1("li",null,mt$1(Fo,null)," Shortcuts might be lost"),mt$1("li",null,mt$1(Fo,null)," Limited storage"),mt$1("li",null,mt$1(Fo,null)," No access to popular variables")),mt$1("a",{href:Dn,onClick:e=>ni({type:"checklist.create-account.signin"}),target:"_blank",rel:"noreferrer",class:"button-medium primary full-width"},"Sign in"));else f=mt$1("div",null,mt$1("h3",null,"Are you on a VPN or have an ad blocker? These can interfere with our connection."),mt$1("p",null,mt$1("a",{href:"mailto:hello@getmagical.com",target:"_blank",rel:"noreferrer"},"Email us")," or ",mt$1("a",{href:zn,target:"_blank",rel:"noreferrer"},"post in our community")," to troubleshoot."));return mt$1(Oe,{title:"Sign in or join now",completed:!(!l.email||!l.jobFunction),optionName:p,canExpandWhenCompleted:!1,expand:t.includes(p),expandedContent:f})}const _e=new he("checklist");function Ye(e){const{expandedItems:t}=e,a="createSnippet",n=to((e=>!!e.global.userInfo.onboarding?.checklist?.createSnippet)),r=";",s=e=>{Qn("prefillNewShortcut",{trigger:e}),_e.request("openOrFocusOptionsTab"),ni({type:"checklist.create-snippet",snippetName:e});},i=mt$1(wt$1,null,mt$1("h3",null,"Need ideas to get started?"),mt$1("ul",{class:"snippet-suggestions"},mt$1("li",null,mt$1("button",{class:"button-small secondary",onClick:e=>s(";cal")},mt$1(bo,null),r,"cal"),"Your calendar link"),mt$1("li",null,mt$1("button",{class:"button-small secondary",onClick:e=>s(";about")},mt$1(bo,null),r,"about"),"Your company blurb"),mt$1("li",null,mt$1("button",{class:"button-small secondary",onClick:e=>s(";linkedin")},mt$1(bo,null),r,"linkedin"),"Your linkedin url")),mt$1("button",{class:"button-medium primary full-width",onClick:e=>s("")},"Create your own"));return mt$1(Oe,{title:"Create a shortcut",completed:n,optionName:a,canExpandWhenCompleted:!0,expand:t.includes(a),expandedContent:i})}const ze=new he("checklist");function Ge(e){const{expandedItems:t}=e,a="createVariableShortcut",n=to((e=>!!e.global.userInfo.onboarding?.checklist?.createVariableShortcut)),r=to((e=>e.global.userInfo.settings.triggerInput)),s=mt$1(wt$1,null,mt$1("h3",null,"Remember to keep the website open while creating the shortcut."),mt$1("p",null,"Type ",r," to insert variables from anywhere on the internet, like names, order numbers, etc."),mt$1("div",{class:"graphic circular-hand-graphic"},mt$1(Xr,null)),mt$1("br",null),mt$1("button",{class:"button-medium primary full-width",onClick:async()=>{await Qn("prefillNewShortcut",{}),ze.request("openOrFocusOptionsTab"),ni({type:"checklist.create-variable-shortcut"});}},"Create shortcut"));return mt$1(Oe,{title:"Create variable shortcut",completed:n,optionName:a,canExpandWhenCompleted:!0,expand:t.includes(a),expandedContent:s})}function Je(t){const{expandedItems:a$1}=t,n="insertSnippet",l=to((e=>!!e.global.userInfo.onboarding?.checklist?.insertSnippet)),r=to((e=>e.global.userInfo.settings.triggerInput)),s=(t,a$1)=>mt$1("img",{class:"platform-logo",onClick:n=>{return l=`https://www.${a$1||t}.com`,void a.browser.tabs.create({url:l});var l;},src:a.browser.runtime.getURL(`assets/platform-logos/${t}.png`)}),i=mt$1("div",{class:"insert-snippet"},mt$1("h3",null,"Try it now!"),mt$1("textarea",{class:"insert-snippet-textarea",placeholder:`Type ${r} or a shortcut`}),mt$1("h3",null,"Works anywhere you type"),s("gmail"),s("fb"),s("zendesk"),s("linkedin"),s("hubspot"),s("outlook","outlook.office"),s("salesforce"),s("twitter"),s("bullhorn"),s("salesloft"),mt$1("div",{class:"platform-plus"},"+100s more"));return mt$1(Oe,{title:"Insert a shortcut",completed:l,optionName:n,canExpandWhenCompleted:!0,expand:a$1.includes(n),expandedContent:i})}function Qe(e){const{expandedItems:t}=e,{platformToShortcutName:n}=to((e=>e.global.config)),l="insertVariableShortcut",r=to((e=>!!e.global.userInfo.onboarding?.checklist?.insertVariableShortcut)),s="Insert a variable shortcut",i=to((e=>e.global.userInfo.onboarding?.addVariableShortcutSelected)),o=`${zn}/group/magical-pro-beta`,c=n.find((e=>e.platform===i));if(!c)return mt$1(Oe,{title:s,completed:r,optionName:l,canExpandWhenCompleted:!0,expand:t.includes(l),expandedContent:mt$1("h3",null,"Please complete the add variable shortcut checklist item first!")});const u=mt$1("div",{class:"insert-variable-snippet"},mt$1("h3",null,"Type ",c.trigger," anywhere to insert the ",c.name," shortcut."),mt$1("p",null,"Not sure what to do?",mt$1("br",null),mt$1("a",{href:c.videoURL,target:"_blank",rel:"noreferrer"},"Reference our ",c.name," tutorial")," or ",mt$1("a",{href:o,target:"_blank",rel:"noreferrer"},"learn from the comunity")));return mt$1(Oe,{title:s,completed:r,optionName:l,canExpandWhenCompleted:!0,expand:t.includes(l),expandedContent:u})}function Xe(a$1){const{expandedItems:n}=a$1,l=to((e=>!!e.global.userInfo.onboarding?.checklist?.pinApp)),r=a.browser.runtime.getURL("assets/demo-pin-toolbar.gif"),s="pinApp",i=new he("pin-checklist"),o=mt$1(wt$1,null,mt$1("h3",null,"Easy access to Magical"),mt$1("p",null,"Pin the app to easily access your Magical workspace from anywhere"),mt$1("img",{class:"right-rail-gif",src:r}),mt$1("button",{class:"button-medium primary full-width",onClick:()=>{ni({type:"checklist.pin-app"}),i.notification("setUserChecklist",{pinApp:!0});}},"I pinned the app!"));return mt$1(Oe,{title:"Pin the app",completed:l,optionName:s,canExpandWhenCompleted:!0,expand:n.includes(s),expandedContent:o})}const Ze=new Map;function Ke(e){const{name:t,title:a,body:n,ctaButtons:l,onClickCloseCallback:s}=e;return Ze.has(t)||document.addEventListener("ViewWillClose",(e=>{if(e.detail.viewName!==t)return;const a=Ze.get(t);a&&!1===a()&&e.preventDefault();})),Ze.set(t,s),mt$1("div",{class:`panel-view view-${o.kebabCase(t)}`},mt$1("main",null,mt$1("div",null,void 0!==a&&mt$1("h1",null,a),n)),l&&mt$1("footer",null,l&&mt$1("div",null,l)))}const et=new he("panel-share-copy");function tt(e){const{url:t,tracking:a,checklistObject:n,useInlineCopyButton:l}=e,[r,s]=nn(!0);return mt$1(wt$1,null,mt$1("span",{class:l?"share-inline-copy":""},mt$1("input",{class:"share-url",type:"text",value:t,readOnly:!0}),mt$1("button",{class:l?"":"button-medium primary full-width",onClick:e=>{at(),ni(a),n&&et.notification("setUserChecklist",n),s(!1);}},l?"Copy":"Copy Share Link")),mt$1("p",{class:"copy-success",hidden:r},"Link copied!"))}const at=e=>{ni({type:"share-cta.click-copy"});const t=document.querySelector("input.share-url");t&&(t.select(),document.execCommand("copy"));};var nt=mp((function(e){return {name:"shareCTA"}}))(Xt("shareCTA",(e=>{const t=to((e=>e.global.referrals)),a=to((e=>e.global.userInfo.featureFlags.referralCreditsEnabled)),n=to((e=>e.global.userInfo.featureFlags.referralCreditsExperimentSequenceEnabled)),l=to((e=>e.global.userInfo.featureFlags.referralCreditsProBetaDefaultSequenceEnabled)),r=to((e=>e.global.totalTimeSaved)),s=ne({referralCreditsEnabled:a,referralCreditsExperimentSequenceEnabled:n,referralCreditsProBetaDefaultSequenceEnabled:l}).toString();let i=mt$1(wt$1,null,mt$1("p",{class:"time-saved-phrases"},`${r.message} ${r.emoji}`),mt$1("div",{class:"time-container"},0===r.timeSaved&&mt$1("div",{class:"timer-sentence"},"No time saved yet"),0!==r.timeSaved&&mt$1("div",null,mt$1("span",{class:"timer-sentence"},mt$1(Po,null)," Time you've saved ",mt$1("br",null)),mt$1("span",{class:"time"},r.timeSaved,"+ ",r.unit," "))),mt$1("hr",null),mt$1("h1",null,"We need your help!"),mt$1("p",null,"Have colleagues or friends that love saving time too? Share the link."),mt$1(tt,{url:s,tracking:{type:"panel.share.copy",referralCount:t.length}}),mt$1("div",{class:"graphic-share"},mt$1(Tr,null)));a&&(i=mt$1(wt$1,null,mt$1("h1",null,"Share the magic!"),mt$1(uL,null),mt$1("div",{class:"copy-share"},mt$1(tt,{url:s,tracking:{type:"panel.share.copy",referralCount:t.length}}))));return Ke({name:e.name,title:void 0,body:i,onClickCloseCallback:()=>{ni({type:"share-cta.click-cancel"});}})})));function lt(e){const{expandedItems:t}=e,a=to((e=>e.global.totalTimeSaved)),n=to((e=>e.global.referrals)),l=to((e=>e.global.userInfo.featureFlags.referralCreditsEnabled)),r=to((e=>e.global.userInfo.featureFlags.referralCreditsExperimentSequenceEnabled)),s=to((e=>e.global.userInfo.featureFlags.referralCreditsProBetaDefaultSequenceEnabled)),i="refer";let o=mt$1(wt$1,null,0!==a.timeSaved&&mt$1("h3",null,"You've already saved ",a.timeSaved,"+ ",a.unit),mt$1("p",null,"Do you have coworkers or friends that love saving time too? Share the link."),mt$1("div",{class:"graphic"},mt$1(_r,null)),mt$1("br",null));l&&(o=mt$1(uL,{isShortened:!0}));const c=mt$1(wt$1,null,mt$1("div",{class:"refer-checklist-content"},o),mt$1(tt,{url:ne({referralCreditsEnabled:l,referralCreditsExperimentSequenceEnabled:r,referralCreditsProBetaDefaultSequenceEnabled:s}).toString(),tracking:{type:"checklist.refer.copy",referralCount:n.length}}));return mt$1(Oe,{title:"Invite people",completed:n.length>0,optionName:i,canExpandWhenCompleted:!0,expand:t.includes(i),expandedContent:c})}function rt(e){const{expandedItems:t}=e,a=to((e=>!!e.global.userInfo.onboarding?.checklist?.referVariables)),n=to((e=>e.global.referrals)),l="referVariables",[r,s]=nn(""),i=to((e=>e.global.userInfo.referralCode)),{shareVariableWaitlistUrl:o}=to((e=>e.global.config));on((()=>{!async function(){const e=new URL(o);e.searchParams.append("referralCode",i),e.searchParams.append("utm_campaign","checklist"),s(e.toString());}();}),[o,i]);const c=mt$1(wt$1,null,mt$1("h3",null,"Invite coworkers and friends to try Magical Pro Beta."),mt$1("div",{class:"graphic circular-hand-graphic"},mt$1(Br,null)),mt$1("br",null),mt$1(tt,{url:r,tracking:{type:"checklist.refer-variables.copy",referralCount:n.length},checklistObject:{referVariables:!0}}));return mt$1(Oe,{title:"Refer friends to waitlist",completed:a,optionName:l,canExpandWhenCompleted:!0,expand:t.includes(l),expandedContent:c})}function st(e){const{expandedItems:t}=e,a=to((e=>!!e.global.userInfo.onboarding?.checklist?.searchShortcuts)),n=to((e=>e.global.userInfo.settings.triggerInput)),l="searchShortcuts",r=mt$1(wt$1,null,mt$1("textarea",{class:"insert-snippet-textarea",placeholder:`Type "${n}" to insert a shortcut`}),mt$1("p",null,"Search all your shortcuts from anywhere with just two keystrokes"));return mt$1(Oe,{title:"Search your shortcuts",completed:a,optionName:l,canExpandWhenCompleted:!0,expand:t.includes(l),expandedContent:r})}function it(t){const{expandedItems:a$1}=t,n=to((e=>!!e.global.userInfo.onboarding?.checklist?.variablesIntro)),l=to((e=>e.global.userInfo.featureFlags.variablesEnabled)),r=to((e=>e.global.config.extensionOnboardingFrameURL)),s=to((e=>e.global.config.extensionProBetaOnboardingFrameURL)),i="variablesIntro",o=a.browser.runtime.getURL("assets/insert-variables.png"),c=mt$1(wt$1,null,mt$1("img",{class:"right-rail-gif",src:o}),mt$1("p",null,"Variables are chunks of data that you select from any website. Magical remembers your variables and automatically fills your shortcuts. No more copy & paste!"),mt$1("a",{href:l?s:r,onClick:()=>ni({type:"checklist.variables-intro.try"}),target:"_blank",rel:"noopener noreferrer",class:"button-medium primary full-width"},"Try it out"));return mt$1(Oe,{title:"Try variables in shortcuts",optionName:i,completed:n,canExpandWhenCompleted:!0,expand:a$1.includes(i),expandedContent:c})}var ot=mp((function(e){return {...e.panel.views.checklist,name:"checklist"}}))(Xt("checklist",(e=>{const t=to((e=>e.global.userInfo)),a=Wp(t),n=mt$1(wt$1,null,mt$1("h1",null,"Get started ✨"),mt$1("ol",{class:"checklist-list"},a.map((t=>function(e,t){switch(e){case"acceptShortcuts":return mt$1(Fe,{...t});case"addVariable":return mt$1(Le,{...t});case"addVariableShortcut":return mt$1(je,{...t});case"autofillVariable":return mt$1(We,{...t});case"createAccount":return mt$1($e,{...t});case"createSnippet":return mt$1(Ye,{...t});case"createVariableShortcut":return mt$1(Ge,{...t});case"insertSnippet":return mt$1(Je,{...t});case"insertVariableShortcut":return mt$1(Qe,{...t});case"pinApp":return mt$1(Xe,{...t});case"refer":return mt$1(lt,{...t});case"referVariables":return mt$1(rt,{...t});case"searchShortcuts":return mt$1(st,{...t});case"variablesIntro":return mt$1(it,{...t});default:throw new Error("invalid checklist item")}}(t,e)))));return Ke({name:e.name,title:void 0,body:n,onClickCloseCallback:void 0})})));const ct=new he("default"),ut=()=>{ni({type:"panel.variables.view"}),ct.notification("openVariablesView");},pt=()=>{ni({type:"panel.variables.view"}),Jo({panel:{activeView:"snippetEdit"}});};function dt(e){const{title:t,expandedContent:a,startExpanded:n}=e,[l,r]=nn(null),s=null===l?n:!!l,i=mt$1(s?So:Eo,null);return mt$1("li",null,mt$1("div",{class:"tab-dropdown-item",onClick:()=>{ni({type:"panel.expand-section",title:t,expanded:!s}),r(!s);}},mt$1("p",null,t),mt$1("span",{class:"chevron"},i)),s&&a&&mt$1("div",{class:"tab-dropdown-expansion"},a))}function bt(e){const{message:t,confirmCallback:a,denyCallback:n}=e;return mt$1("div",{id:"confirmation-container",class:"confirmation-container"},mt$1("div",{class:"confirmation-body"},t),mt$1("button",{class:"button-small primary",onClick:a},"Yes"),mt$1("button",{class:"button-small secondary",onClick:n},"No"))}const ht=new he("right-rail");async function mt(e,t){e.stopPropagation(),await async function(e){ni({type:"snippet.delete",snippetId:e.id}),await ht.request("deleteSnippet",e);}(t),Jo({panel:{views:{snippetList:{pendingDeletedSnippetId:""}}}});}function gt(e){e.stopPropagation(),Jo({panel:{views:{snippetList:{pendingDeletedSnippetId:""}}}});}function ft(e){const{pendingDeletedSnippetId:t,snippet:a}=e;let n=null;const l=t.includes(a.id);return l&&(n=mt$1(bt,{message:"Delete snippet?",confirmCallback:e=>mt(e,a),denyCallback:gt})),mt$1(wt$1,null,n,mt$1("div",{class:"list-icon "+(l?"pending-deletion":"")},0===a.srcBaseUrls.length&&mt$1(Mo,null),a.srcBaseUrls.length>0&&mt$1("img",{src:qt$1(a.srcBaseUrls[0]),class:"magical-goog-user-content-favicon"})),mt$1("div",{class:"list-full-title "+(l?"pending-deletion":"")},mt$1("span",{class:"list-title"},a.trigger),mt$1("span",{class:"list-subtitle"},a.plainTextBody)),mt$1("div",{class:"delete-container "+(l?"pending-deletion":"")},mt$1("button",{class:"actionable-icon delete-icon",onClick:e=>{e.stopPropagation(),function(e){const t=e.id;Jo({panel:{views:{snippetList:{pendingDeletedSnippetId:t}}}});}(a);}}," ",mt$1(Lo,null))))}function vt(e,t){const a=qn(e);return mt$1("div",{class:"shortcut-view"},mt$1("div",{class:"list"},mt$1("ul",null,a.map((e=>mt$1("li",{onClick:a=>{t!==e.id&&function(e){ni({type:"snippet.edit",snippetId:e.id}),Jo({panel:{activeView:"snippetEdit",views:{snippetEdit:{snippet:e}}}});}(e);},key:e.id},mt$1(ft,{pendingDeletedSnippetId:t,snippet:e}))))," ")))}function yt(e){const{snippets:t,pendingDeletedSnippetId:a,shouldStartExpanded:n}=e,l=`${to((e=>e.global.config.magicalMarketingURL))}/onboarding/shortcuts/canned`;let r;return r=0===t.length?mt$1("div",{class:"help-card"},mt$1("h3",null,"Save time with shortcuts"),mt$1("p",null,"Autofill your own text anywhere, from zoom links to company descriptions to urls."),mt$1("img",{class:"right-rail-gif",src:chrome.runtime.getURL("assets/demo-snippets.gif")}),mt$1("a",{class:"button-small tertiary",href:l,target:"_blank",rel:"noreferrer"},"Try a 1 min tutorial")):vt(t,a),mt$1(dt,{title:`Shortcuts (${t.length})`,startExpanded:n||t.length>0,expandedContent:r})}function kt(t){const{snippets:a$1,pendingDeletedSnippetId:n,shouldStartExpanded:l,variablesEnabled:r}=t,s=a.browser.runtime.getURL("assets/placeholders-insert.gif"),i=a.browser.runtime.getURL("assets/variables.png"),o=to((e=>e.global.config.learnVariablesURL)),c=to((e=>e.global.config.learnPlaceholdersURL));let u;return u=0===a$1.length?r?mt$1("div",{class:"help-card"},mt$1("h3",null,"No variable shortcuts yet"),mt$1("p",null,"Click ",mt$1("div",{class:"help-card-edit-variables",onClick:pt},"Create shortcut")," to add a new shortcut with variables"),mt$1("img",{class:"right-rail-gif",src:i}),mt$1("a",{class:"button-small tertiary",href:o,target:"_blank",rel:"noreferrer"},"Learn about variables")):mt$1("div",{class:"help-card"},mt$1("h3",null,"No variables shortcuts yet"),mt$1("p",null,"Click ",mt$1("div",{class:"help-card-edit-variables",onClick:pt},"Create shortcut")," to add a new shortcut with text variables"),mt$1("img",{class:"right-rail-gif",src:s}),mt$1("a",{class:"button-small tertiary",href:c,target:"_blank",rel:"noreferrer"},"Learn about text variables")):vt(a$1,n),mt$1(dt,{title:`Variable shortcuts (${a$1.length})`,startExpanded:l||a$1.length>0,expandedContent:u})}function wt(e){const{snippets:t,pendingDeletedSnippetId:a,variablesEnabled:n,placeholdersEnabled:l}=e,r=t.filter((e=>e.sourceIds.length)),s=t.filter((e=>!e.sourceIds.length));return mt$1("ol",{class:"tab-list"},(l||n)&&mt$1(kt,{pendingDeletedSnippetId:a,shouldStartExpanded:r.length>0,snippets:r,variablesEnabled:n}),mt$1(yt,{pendingDeletedSnippetId:a,shouldStartExpanded:s.length>0||0===t.length,snippets:s}))}const Ct=new he("variable-list"),St="This variable doesn't appear on this page. Information may only load when you scroll or some of the variables may not exist.";function xt(e){const{canPromote:t,isReadOnly:a,srcMatches:n}=e,l=ro(n),[s,o$1]=nn(void 0);on((()=>{!a&&l&&o$1(o.difference(n.map((({srcSelector:e})=>e.id)),l.map((({srcSelector:e})=>e.id)))[0]);}),[a,l,n]);const c=[];let u=0;const p=o.remove(n,(e=>"url"===e.srcSelector.type));1===p.length&&n.push(p[0]);const d=t$2(n,(e=>e));return mt$1("div",{class:"variables-list"},mt$1("ul",null,d.sort(Ce).map((e=>{const{missing:n,label:l}=e;return n?(l?.name||""||t?c.push(function(e,t){return mt$1("li",{class:"missing"},mt$1("div",{class:"source-variable-label"},e.label?.name||""),mt$1("div",{class:"source-variable-separator"},"·"),mt$1("div",{class:"source-variable-value",onClick:()=>{t&&r.warn(e);}},"Not showing"),mt$1("div",{class:"icon-container",title:St},mt$1(uo,null)))}(e,t)):u++,null):function(e,t,a,n){const{label:l,srcSelector:r$1,originalValue:s,transforms:o}=e,c=o.some((e=>"hyperlink"===e.type)),u=o.map((e=>`${e.type}`)).join(" "),p="linkedin-first-name"===e.srcSelector.modifier||"linkedin-last-name"===e.srcSelector.modifier,d=[];""!==u&&d.push(u);"url"===r$1.type&&d.push("hyperlink");a&&d.push("read-only");p&&d.push("split-modifier");const b=t=>{!function(e){Ct.notification("promoteLabel",e);}(e);},h=dp(e)&&2===e.plainTextValue.trim().split(" ",2).length&&(!e.srcSelector.modifier||"linkedin-name"===e.srcSelector.modifier);return mt$1("li",{class:d.join(" "),ref:t=>{e.srcSelector.id===n&&t?.scrollIntoView({behavior:"smooth"});}},t&&e.label&&mt$1("span",{class:"promote-demote",onClick:b},"↑"),l&&mt$1("div",{class:"source-variable-label"},l.name),l&&mt$1("div",{class:"source-variable-separator"},"·"),"url"===r$1.type&&mt$1("div",{class:"icon-link"},mt$1(fo,null)),mt$1("div",{class:"source-variable-value",onClick:()=>{t&&r.warn(e);}},s),"url"!==r$1.type&&mt$1("div",{class:"icon-container"},mt$1("div",{class:"icon actionable-source-icon",onClick:t=>{!function(e){gp({showModal:!0,srcMatch:e,isEdit:!0});}(e);}},mt$1(yo,null)),h&&mt$1("div",{class:"icon actionable-source-icon",onClick:t=>{!function(e){Ct.notification("showModifiedVariablesDialog",e,["linkedin-first-name","linkedin-last-name"]);}(e);}},mt$1($o,null)),mt$1("div",{class:"icon actionable-source-icon",onClick:e=>{var t;t=r$1,Ct.notification("toggleTransform",t.id,"hyperlink");}},mt$1(c?Vo:ho,null)),!a&&mt$1("div",{class:"icon x-icon",onClick:e=>{var t;"url"!==(t=r$1).type&&(Ct.notification("removeSource",t.id),ni({type:"template.remove-selector",selector:t,clickedX:!0}));}},mt$1(ao,null)),p&&a&&mt$1("div",{class:"icon split-icon",title:"This is a split variable"},mt$1($o,null))))}(e,t,a,s)})),c,u>0&&mt$1("li",{class:"missing"},mt$1("div",{class:"source-variable-value"},"(",u,") Not showing"),mt$1("div",{class:"icon-container",title:St},mt$1(uo,null)))))}function It(e){const{srcPage:t}=e,{srcMatches:a}=t,n=to((e=>e.global.userInfo.canPromote));let l;return l=a.length?mt$1(xt,{isReadOnly:!0,srcMatches:a,canPromote:n}):mt$1("div",{class:"help-card"},mt$1("h3",null,"No variables yet"),mt$1("p",null,"Click ",mt$1("div",{class:"help-card-edit-variables",onClick:ut},"Add Variables")," to add variables to this page template"),mt$1("div",{class:"help-card-example-variables"},mt$1(no,null))),mt$1(dt,{title:`This website's variables (${a.length})`,startExpanded:!0,expandedContent:l})}function Et(t){const{otherSrcPages:a$1}=t,n=a.browser.runtime.getURL("assets/create-edit-template.gif");let l;return l=0===a$1.length?mt$1("div",{class:"help-card"},mt$1("h3",null,"Use variables from any website"),mt$1("p",null,"We have variables for hundreds of websites. Try ",mt$1("a",{href:"https://www.linkedin.com/in/owinfrey/",target:"_blank",rel:"noreferrer"},"Linkedin"),", ",mt$1("a",{href:"https://www.yelp.com",target:"_blank",rel:"noreferrer"},"Yelp"),", ",mt$1("a",{href:"https://www.airbnb.com",target:"_blank",rel:"noreferrer"},"Airbnb"),", or make your own!"),mt$1("img",{class:"right-rail-gif",src:n})):mt$1("ul",{class:"other-sources-list"},a$1.map((t=>{return mt$1("li",null,mt$1("div",{class:"other-sources-item",onClick:()=>a.browser.tabs.update(a$1.tabId,{active:!0})},mt$1("img",{class:"other-sources-favicon magical-goog-user-content-favicon",src:qt$1((a$1=t).srcUrl)}),mt$1("div",{class:"other-sources-text"},mt$1("h3",null,a$1.title," "),mt$1("p",null,a$1.srcMatches.length," variables"))));var a$1;}))),mt$1(dt,{title:`Other open websites with variables (${a$1.length})`,startExpanded:!1,expandedContent:l})}function Pt(e){const{srcPage:t,user:a,otherSrcPages:n}=e,l={otherSrcPages:n};return mt$1("ol",{class:"tab-list"},mt$1(It,{...{user:a,srcPage:t}}),mt$1(Et,{...l}))}function Vt(e){ni({type:"snippet.create"});const t={...Bn(),id:pe()};e&&e.length>0&&(t.trigger=e),Jo({panel:{activeView:"snippetEdit",views:{snippetEdit:{snippet:t}}}});}var Ut=mp((function(e){const t=e.srcPage.srcMatches.filter((e=>!1===e.missing)).map((e=>e.srcSelector.id));return {...e.panel.views.default,name:"default",hasSourcesPresent:!!t.length,pendingDeletedSnippetId:e.panel.views.snippetList.pendingDeletedSnippetId,srcPage:e.srcPage}}))(Xt("default",(e=>{const t=function(e){const{hasSourcesPresent:t,selected:a}=e;if(a)return a;let n="Shortcuts";return t&&(n="Variables"),n}(e),{pendingDeletedSnippetId:a,srcPage:n}=e,l=to((e=>e.global.srcPagesForOpenTabs?e.global.srcPagesForOpenTabs.filter((e=>e.tabId!==n.tabId&&e.srcMatches.length>0)):[])),r=to((e=>e.global.snippets)),s=to((e=>e.global.userInfo));let i,o,c;if(!s.featureFlags.variablesEnabled)return Ke({name:e.name,title:void 0,body:mt$1(wt,{pendingDeletedSnippetId:a,placeholdersEnabled:s.featureFlags.placeholderVariablesEnabled||!1,snippets:r,variablesEnabled:s.featureFlags.variablesEnabled||!1}),onClickCloseCallback:void 0,ctaButtons:mt$1("button",{class:"button-medium primary full-width",onClick:()=>Vt()},"Create Shortcut")});switch(t){case"Shortcuts":i=mt$1(wt,{pendingDeletedSnippetId:a,placeholdersEnabled:s.featureFlags.placeholderVariablesEnabled||!1,snippets:r,variablesEnabled:s.featureFlags.variablesEnabled||!1}),c="Create shortcut",o=()=>{Vt();};break;case"Variables":i=mt$1(Pt,{otherSrcPages:l,srcPage:n,user:s}),c=n.srcMatches.length>0?"Edit variables":"Add variables",o=()=>{ut();};}const u=mt$1("button",{class:"button-medium primary full-width",onClick:o},c);function p(e){return mt$1("button",{class:`nav-tab ${t===e?"selected":""}`,onClick:()=>(e=>{ni({type:"panel.tab",tab:e}),Jo({panel:{activeView:"default",views:{default:{selected:e}}}});})(e)},e,"Variables"===e&&mt$1("span",{class:"variable-beta-icon"},mt$1(Wo,null)))}const d=mt$1(wt$1,null,mt$1("nav",{class:"nav-bar"},mt$1("div",{class:"nav-bar-tabs"},p("Shortcuts"),p("Variables")),mt$1("hr",null)),i);return Ke({name:e.name,title:void 0,body:d,onClickCloseCallback:void 0,ctaButtons:u})})));const Tt=new he("autofill-snippet"),Nt=new he("panel"),Rt=St$1(),Ot=e=>{Rt.current=e;},Ft=St$1(),Lt=e=>{Ft.current=e;};var Bt=mp((function(e){return {...e.panel.views.snippetEdit,name:"snippetEdit",variableSuggestionHelpOpen:e.panel.variableSuggestionHelpOpen,currentUrl:e.srcPage.srcUrl}}))(Xt("snippetEdit",(e=>{const{snippet:t,currentUrl:a}=e,n$1=to((e=>e.global.snippets)),l=to((e=>e.global.snippetCollections)),r=to((e=>e.global.srcPagesForOpenTabs)),s=to((e=>e.global.srcPagesForClosedTabs)),i=to((e=>e.global.notifications.variablesPanelInsertHelp)),u=to((e=>e.global.userInfo.featureFlags.variablesEnabled))||!1,b$1=to((e=>e.global.srcPagesForOpenTabs.some((({srcMatches:e})=>e.length>0)))),h=to((e=>e.global.notifications.variableSuggestionSelection)),m=to((e=>e.global.userInfo.featureFlags.placeholderVariablesEnabled)),g$1=to((e=>e.global.config.shortcuts.variableSuggestionPatterns)),f=to((e=>e.global.userInfo.featureFlags.richTextEditorEnabled)),[v,y]=nn(!0),[k,w]=nn(!0),[C,S]=nn(t.trigger??""),[x,I]=nn(""),E=n$1.filter((e=>e.id!==t.id)).map((e=>e.trigger)),{isTriggerValid:P,errorMessage:V}=dr(C,E);I(V);const[U,T]=nn(pe()),N=un(null);on((()=>{N.current&&N.current.focus();}),[]),on((()=>w(!!f&&v)),[f,v]);const R=o$1(l).map((e=>({id:e.id,label:e.label,color:e.metadata?.tag?.color,checked:e.snippetIds.includes(t.id),indeterminate:!1}))),O=t$1(l),F=o$1(n(t.id,O,l)).sort(((e,t)=>e.label.localeCompare(t.label))),L=r.filter((e=>e.srcMatches.length>0)),B=mt$1("form",{id:"snippet-edit-form",class:"snippet",onSubmit:a=>{!async function(t,a){const{showVariableSuggestion:n,selection:l}=gr({variableSuggestionSelection:h,variableSuggestionPatterns:g$1,bodyValueRef:Ft,richTextEditorRef:Rt,snippet:a,useRichTextEditor:k,placeholdersEnabled:m,variablesEnabled:u,hasVariablesAvailable:b$1});if(n){t.preventDefault();const e=h?.previouslyShownShortcutIds?[...h?.previouslyShownShortcutIds]:[];return e.push(a.id),g({variableSuggestionSelection:{workspaceShortcutId:h?.workspaceShortcutId||null,previouslyShownShortcutIds:e,selection:l||""}}),void Jo({panel:{variableSuggestionHelpOpen:!0}})}e.variableSuggestionHelpOpen&&Jo({panel:{variableSuggestionHelpOpen:!1}});const r=await Vr(Ft,t,Rt,a,C,k);if(r){Tt.notification("snippetEditingDone",r.id);const{numSiteVariables:e,numPublicPlaceholders:t,numPrivatePlaceholders:n,numTotalPlaceholders:l}=hr(r);ni({type:"snippet.save",snippetId:r.id,isNew:""===a.body,wysiwygUsed:!!Rt.current,isOnPanel:!0,numSiteVariables:e,numPublicPlaceholders:t,numPrivatePlaceholders:n,numTotalPlaceholders:l}),r.srcSelectors.some((e=>"placeholder"===e.type))&&void 0===(await Xn("notifications"))?.placeholdersPanelInsertHelp&&g({placeholdersPanelInsertHelp:!0}),Zt({closeVariableHelp:i});}}(a,t);}},mt$1("div",{class:"snippet-name "+(P?"":"snippet-name-error")},mt$1("div",{class:"snippet-name-prompt"},mt$1("span",null,"Shortcut Trigger*"),""!==C.trim()&&!P&&mt$1("span",{class:"snippet-name-error-message"},"  ",x)),mt$1("div",null,mt$1("input",{id:"ha-snippet-trigger-contents",class:b,type:"text",ref:N,"data-magical":"true","data-magical-prevent-expansion":"true",placeholder:"Enter name",value:C,onInput:async function(){S(document.getElementById("ha-snippet-trigger-contents").value);},autocomplete:"off"}))),mt$1(jp,{class:"body-field"},mt$1(pC,{bodyRefCallback:Lt,editorRefCallback:Ot,initialValue:t.body,isInPanel:!0,key:U,placeholder:"Enter any text. Use “//” to insert a variable",snippetId:t.id,useRichTextEditor:k,onIncompatible:()=>y(!1),srcPagesWithVariables:L,srcPagesForClosedTabs:s,initialSrcBaseUrl:t.srcBaseUrls[0]?t.srcBaseUrls[0]:null,currentUrl:a})),t.srcBaseUrls&&mt$1("div",{class:"popup-text",id:"no-src-open-popup",hidden:!0},mt$1("div",{class:"header"},"Open a webpage from ",t.srcBaseUrls),mt$1("div",{class:"body"},"Dynamic variables need a source open to pull from. Only one source can be connected for dynamic variables.")),""!==t.body&&mt$1("div",{class:"tags-container"},mt$1(ce,{tagData:R,onApply:e=>ye(e,[t.id]),onCreate:()=>Nt.request("openOrFocusOptionsTab"),options:{label:"Tags",showCreate:!0,showDelete:!1,showEdit:!1,toggleClass:"tertiary button-small no-caret",icon:mt$1(No,null),isSelectable:!0}}),mt$1("div",{class:"shortcut-labels-container"},F.map((e=>mt$1("span",{key:e.id,className:`shortcut-tag ${e.metadata?.tag?.color||""}`,title:e.label||""},e.label)))))),D=mt$1("div",{class:"button-container"},mt$1("button",{class:"button-medium primary",disabled:!P,type:"submit",form:"snippet-edit-form"},"Save"),mt$1("button",{class:"button-medium secondary",onClick:e=>{var a;a=t,ni({type:"snippet.cancel"}),Tt.notification("snippetEditingDone",a?.id),Zt({closeVariableHelp:i}),a?.body&&T(pe());}},"Cancel"));return Ke({name:e.name,title:void 0,body:B,ctaButtons:D,onClickCloseCallback:()=>{ni({type:"snippet.close"}),Tt.notification("snippetEditingDone",t.id),Jo({panel:{views:{snippetEdit:{snippet:{id:""}}}}});}})})));const Dt=new he("placeholders-update"),At=e=>{const{onboardingUpdate:t,panelNotificationObject:a,tracking:n}=e;t&&Dt.notification("updateUserOnboarding",t),Jo({panel:{activeView:"default",previousViews:[],...a}}),ni(n);},Mt=()=>{At({panelNotificationObject:{proBetaUpgradeNotificationOpen:!1},tracking:{type:"pro-beta-upgrade.notification.dismiss"}});},jt=()=>{ni({type:"pro-beta-upgrade.notification.explore"}),Mt();};var Wt=mp((function(e){return {...e.panel.views.proBetaUpgradeUpdate,name:"proBetaUpgradeUpdate"}}))(Xt("proBetaUpgradeUpdate",(e=>{on((()=>ni({type:"pro-beta-upgrade.notification.show"})),[]);const t=to((e=>e.global.userInfo)),a=to((e=>e.global.config.extensionProBetaOnboardingFrameURL)),n=to((e=>e.global.config.proBetaUpgradeFrameUrl)),l=t.onboarding?.proBetaCohort===R.REFERRAL_CREDITS?"Because someone you referred joined Magical...":"Because you’re our favorite magician...",r=mt$1(jp,{stylesheets:["/shared-ui-components/buttons.css","updates/pro-beta-upgrade-update.css"]},mt$1(wt$1,null,mt$1("h3",null,l),mt$1("h1",null,"You now have  ",mt$1(ro$1,null)),mt$1("p",null,"Magical Pro effortlessly moves data across all of your websites so you can automatically fill your shortcuts. No more copy and paste. "),mt$1("iframe",{id:"promo-iframe",class:"options-card",src:n,scrolling:"no"}),mt$1("div",{class:"pro-beta-upgrade-buttons"},mt$1("a",{type:"button",href:a,target:"_blank",rel:"noreferrer",class:"button-medium primary",onClick:jt},"Explore"),"  ",mt$1("button",{class:"button-medium secondary",onClick:Mt},"Dismiss"))));return Ke({name:e.name,title:void 0,body:r,onClickCloseCallback:void 0})})));const qt=new he("referral-credits-update");function Ht(){At({panelNotificationObject:{referralCreditsNotificationOpen:!1},tracking:{type:"referral-credits.update.dismiss"}});}function $t(){At({panelNotificationObject:{referralCreditsNotificationOpen:!1},tracking:{type:"referral-credits.update.share"}}),qt.notification("openOrFocusOptionsTab",{params:{dialog:"shareApp"}});}var _t=mp((function(e){return {...e.panel.views.referralCreditsUpdate,name:"referralCreditsUpdate"}}))(Xt("referralCreditsUpdate",(e=>{on((()=>ni({type:"referral-credits.update.show"})),[]);const t=to((e=>!!e.global.userInfo.featureFlags.referralCreditsEnabled)),a=to((e=>!!e.global.userInfo.featureFlags.referralCreditsExperimentSequenceEnabled)),n=to((e=>!!e.global.userInfo.featureFlags.referralCreditsProBetaDefaultSequenceEnabled));let l="Want unlimited shortcuts? And access to super secret Magical Pro?";n?l="Want unlimited shortcuts and unlimited variables?":a&&(l="Want Magical credits towards advanced premium features launching soon?");const r=ne({referralCreditsEnabled:t,referralCreditsProBetaDefaultSequenceEnabled:n,referralCreditsExperimentSequenceEnabled:a}).toString(),s=mt$1(wt$1,null,mt$1("h1",null,"😎 Refer people to earn features and credit"),mt$1("p",null,l," Share Magical and get rewarded."),mt$1(uL,{isShortened:!0}),mt$1(tt,{url:r,tracking:{type:"referral-credits.update.copy"},useInlineCopyButton:!0}),mt$1("div",{class:"referral-credits-ctas"},mt$1("button",{class:"button-medium secondary",onClick:Ht},"Got it")," ",mt$1("button",{class:"button-medium primary",onClick:$t},"Share")));return Ke({name:e.name,title:void 0,body:s,onClickCloseCallback:void 0})})));const Yt=new he("variables-view");function zt(){ni({type:"template.click-cancel"});}function Gt(){Jo({panel:{deleteAllVariablesDialogProps:{showModal:!0}}});}var Jt=mp((function(e){return {name:"variables",srcMatches:e.srcPage.srcMatches,pageUrl:e.srcPage.srcUrl}}))(Xt("variables",(function(e){on((()=>()=>Yt.notification("doneEditing")),[]);const{srcMatches:t}=e,a=to((e=>e.global.userInfo.canPromote)),n=to((e=>e.global.notifications.variablesPanelInsertHelp)),l=chrome.runtime.getURL("assets/create-edit-template.gif");let r;r=0===t.length?mt$1(wt$1,null,mt$1("p",null,"Click on any element to add or remove variables."),mt$1("img",{class:"right-rail-gif",src:l})):mt$1(wt$1,null,mt$1("p",null,"Click on any element to add or remove variables."),mt$1(xt,{isReadOnly:!1,canPromote:a,srcMatches:t}),mt$1("div",{class:"delete-variables"},mt$1("button",{onClick:Gt,class:"button-small tertiary-muted"},"Delete all variables")));const s=t[0]?.srcSelector,i=mt$1("button",{class:"button-medium primary full-width",onClick:()=>{Zt(),void 0===n&&s&&(g({variablesPanelInsertHelp:!0}),Jo({panel:{activeView:"snippetEdit",views:{snippetEdit:{snippet:{srcBaseUrls:[s.baseUrl]}}}}}));}},"Done"),o=(e.pageUrl?new URL(e.pageUrl).hostname:"").replace(/^www\./,""),c=`${t.length>0?"Edit variables":"Add variables"} for ${o}`;return Ke({name:e.name,title:c,body:r,ctaButtons:i,onClickCloseCallback:zt})})));const Qt=new he("panel");if(!document.location.pathname.endsWith("/right-rail.html"))throw new Error("This file shouldn't be imported outside right-rail.html");function Xt(e,t){return class extends Ot$1{render(){return e!==qo((e=>e.panel.activeView))?null:mt$1(t,{...this.props})}}}function Zt(e){const{activeView:t,previousViews:a}=qo((e=>e.panel));if("snippetEdit"===t&&e?.closeVariableHelp&&g({variablesPanelInsertHelp:!1}),!document.dispatchEvent(new CustomEvent("ViewWillClose",{cancelable:!0,detail:{viewName:t}})))return;const n=a.slice(0,-1);Jo({panel:{activeView:n[n.length-1],previousViews:n}});}function Kt(){ni({type:"panel.go-to-workspace"}),Qt.request("openOrFocusOptionsTab");}function ea(){return mt$1("div",{class:"logo",onClick:Kt},mt$1(go,null))}function ta(){return mt$1("button",{class:"button-small home-button tertiary-muted",onClick:Kt},mt$1(po,null))}function aa(e){return mt$1("button",{class:"button-small back-button tertiary-muted",onClick:()=>Zt({closeVariableHelp:e&&e.variablesPanelInsertHelp})},mt$1(so,null))}function na(e){const{totalTimeSaved:t}=e;return mt$1("footer",{class:"time-saved"},mt$1("div",{class:"time-saved-text"},mt$1(Po,null)," ",0===t.timeSaved&&"No time saved yet",0!==t.timeSaved&&mt$1(wt$1,null,mt$1("span",null,"Saved "),mt$1("span",{class:"time-saved-quantity"},t.timeSaved,"+ ",t.unit))),mt$1("button",{class:"actionable-icon",onClick:()=>{var t;t=e.activeView,ni({type:"panel.share.show",entryPointView:t}),Jo({panel:{activeView:"shareCTA"}});}},mt$1(wo,null)))}const la=["snippetEdit","placeholdersUpdate","variables","shareCTA","proBetaUpgradeUpdate","referralCreditsUpdate"],ra=["shareCTA","placeholdersUpdate","proBetaUpgradeUpdate","referralCreditsUpdate","checklist"];function sa(e){const t=ro(e.tabState.panel.activeView),a=to((e=>e.global.referrals));on((()=>{const{srcPage:{srcUrl:l}}=e.tabState,r=!!l&&Nt$1(new URL(l));if("checklist"!==t&&r){const e=Wp(n),t=$p(n,a.length).nextItem||e[e.length-1];Jo({panel:{activeView:"checklist",views:{checklist:{expandedItems:[t]}}}});}}));const n=to((e=>e.global.userInfo)),l=to((e=>e.global.totalTimeSaved)),r=to((e=>e.global.notifications.variablesPanelInsertHelp))||!1,{activeView:s}=e.tabState.panel,{srcPage:{srcUrl:i}}=e.tabState,o=!!i&&Nt$1(new URL(i)),c=qo((e=>e.panel.previousViews.length))>1&&!o;return mt$1(wt$1,null,mt$1("header",null,!o&&mt$1(ta,null),c&&mt$1(aa,{variablesPanelInsertHelp:r}),mt$1(ea,null),!la.includes(s)&&mt$1(Bp,{isOnPanel:!0})),mt$1(Ut,null),mt$1(ot,null),mt$1(nt,null),mt$1(Bt,null),mt$1(Jt,null),mt$1(Wt,null),mt$1(_t,null),!o&&!ra.includes(s)&&mt$1(na,{totalTimeSaved:l,activeView:e.tabState.panel.activeView}))}!function(){const e=document.getElementById("App");let t$1;e&&(t$1=Zo((()=>{const t=Ko();Lt$1(mt$1(Xe$1,{store:Ro},mt$1(sa,{tabState:t})),e);}))),t((()=>{(void 0)(),t$1&&t$1.unsubscribe();}));}();
